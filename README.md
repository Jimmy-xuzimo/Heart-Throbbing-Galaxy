
# 💗 心动的星河 (Heart-Throbbing Galaxy)

<div align="center">

![爱心动画](https://img.shields.io/badge/3D-%E7%B2%BE%E7%BE%8E%E5%8A%A8%E7%94%BB-blue?style=for-the-badge&logo=heart)
![HTML5](https://img.shields.io/badge/HTML5-Canvas-yellow?style=for-the-badge&logo=html5)
![JavaScript](https://img.shields.io/badge/JavaScript-ES6+-green?style=for-the-badge&logo=javascript)
![Audio](https://img.shields.io/badge/Web-Audio-purple?style=for-the-badge&logo=musicalnote)
![License](https://img.shields.io/badge/License-MIT-orange?style=for-the-badge&logo=license)

*A romantic 3D particle heart animation with heartbeat sound effects* 🌌

</div>

---

## ✨ 一、实现效果

本项目是一个**沉浸式 3D 粒子爱心动画网页** 💫，以深邃的黑色宇宙为背景，呈现出一个由**3000+ 颗粉色粒子**组成的立体爱心 ❤️。爱心以优雅的节奏缓慢旋转，并伴随着模拟心跳的脉动效果，仿佛一颗真正的心脏在宇宙中持续跳动，给观众带来强烈的视觉冲击与情感共鸣 💓。

### 🎆 粒子特效系统

页面中包含了丰富多样的粒子特效，让整个画面充满生机与浪漫：

| 特效类型 | 描述 |
|---------|------|
| 🌟 **银河粒子** | 如流星般从画面上方滑落，带出梦幻般的拖尾效果 |
| 💧 **粒子雨** | 从立体心形的底部不断滴落，形成灵动的粒子雨效果 |
| 🎀 **飘落小心心** | 从屏幕上方缓缓飘落，每个都带有自转和闪烁效果 ✨ |
| 🎆 **点击烟花** | 点击屏幕任意位置，瞬间爆发星星和小心心的烟花特效 |

### 🎵 心跳音效系统

项目最具特色的地方在于其**心跳音效系统** 🎶。通过 Web Audio API 实现的三种不同风格的心跳音效——**简约风格、梦幻风格和钢琴风格**——会随着爱心的脉动自动随机播放，为视觉体验增添了听觉维度，使整个作品更加完整和动人 🎹。

---

## 🎨 二、设计风格

整体设计风格定位为**浪漫唯美的赛博朋克太空美学** 🌃，将科技感与浪漫元素完美融合：

- 🌑 **深邃黑背景** — 象征无垠的宇宙空间
- 🌟 **银河粒子** — 金色、白色、蓝色和紫色的星星代表星空中的繁星
- 💕 **粉色爱心粒子** — 象征着宇宙中永恒不变的爱意

### 🎯 核心设计语言

> **粒子化呈现**是本项目的核心设计语言。相比传统的线条或填充图形，粒子系统能够创造出更加细腻、有机的视觉效果。

✨ **设计亮点：**
- 3000 颗粒子组成的 3D 爱心
- 深度排序和透明度变化呈现立体感
- 每个粒子根据深度位置动态调整大小和颜色亮度
- 非线性缓动算法实现平滑流畅的动画效果
- 多重正弦波叠加模拟真实心脏跳动的复杂节律 🫀

---

## 🔧 三、实现原理

### 3.1 💝 3D 爱心形状生成

3D 爱心的数学模型基于一个经典的**隐函数公式**，该公式能够在三维空间中定义出一个完美的心形曲面：

```
(x² + 9y²/4 + z² - 1)³ - x²z³ - 9y²z³/80 ≤ 0
```

代码中使用的判断函数 `isIn3DHeart` 通过计算空间中任意一点 (x, y, z) 是否满足心形方程来判断该点是否位于心形内部。

> 💡 **技术要点：** 在初始化粒子时，程序会在一个立方体空间内随机生成坐标点，然后通过上述方程筛选出位于心形内部的点作为粒子位置。这种方法简单高效，能够均匀分布地生成数千个粒子。

### 3.2 🖥️ 3D 到 2D 投影渲染

将 3D 粒子坐标转换为 2D 屏幕坐标需要经过**旋转**和**透视投影**两个步骤：

```javascript
// Y轴旋转矩阵
xRot = x·cos(θ) + z·sin(θ)
zRot = -x·sin(θ) + z·cos(θ)

// 透视投影
depthFactor = (zRot + distance) / (2·distance)
```

### 3.3 🧩 粒子系统架构

项目采用了**面向对象的粒子系统架构**，每种粒子类型都封装为独立的类：

| 粒子类 | 功能描述 |
|-------|---------|
| `Particle` | 组成 3D 爱心的核心粒子，在三维空间中缓慢漂浮 |
| `GalaxyParticle` | 模拟银河流星效果，从屏幕上方飘落 |
| `ParticleDrop` | 从爱心底部生成，携带拖尾效果向下飘落 |
| `FallingHeartParticle` | 绘制心形图案，模拟飘落的爱心 🎀 |
| `ClickStarParticle` | 响应点击事件，产生星星烟花 🌟 |
| `ClickHeartParticle` | 响应点击事件，产生小心心烟花 💕 |

### 3.4 🎵 心跳音效合成

心跳音效完全通过 **Web Audio API** 的振荡器（Oscillator）和增益节点（GainNode）实时合成，无需加载外部音频文件 🎶：

| 音效风格 | 特点 |
|---------|------|
| 🎹 **简约风格** | 正弦波振荡器，模拟「咚—哒」双声节奏 |
| 🌌 **梦幻风格** | 三角波 + 带通滤波器 + 延迟效果，空灵感 |
| 🎹 **钢琴风格** | 基频 + 谐波叠加，柔和悦耳的钢琴音色 |

---

## 📖 四、使用说明

### 🚀 运行方式

本项目是一个**纯静态的 HTML 文件**，可以直接在浏览器中打开 🌍。

**推荐浏览器：** Chrome、Firefox、Edge、Safari

```bash
# 方式一：直接在浏览器中打开
open 爱心.html

# 方式二：使用本地服务器
npx serve .
```

> ⚠️ **注意：** 首次打开网页时音频处于静音状态，**点击页面任意位置**即可初始化音频系统 🎧。

### 🎮 交互控制

| 操作 | 功能 |
|-----|------|
| ⬅️ **← 键** | 控制爱心向左旋转 |
| ➡️ **→ 键** | 控制爱心向右旋转 |
| 🖱️ **点击** | 触发星星和小心心烟花特效 🎆 |

---

## 📁 五、文件结构

```
Heart-Throbbing-Galaxy/
├── 📝 README.md        # 项目说明文档
├── 💾 爱心.html        # 主页面文件
└── 🔒 .gitignore       # Git 忽略配置
```

---

## 🌟 六、技术亮点

### 🎯 核心优势

- ✨ **纯前端实现** — 不依赖任何外部库或框架，原生 HTML5 Canvas + JavaScript
- 🚀 **性能优化** — 数千个动态粒子保持 60fps 流畅帧率
- 🎵 **程序化音频** — 纯代码合成音效，无需外部音频文件
- 💫 **交互友好** — 巧妙处理浏览器自动播放策略限制

### 📊 性能指标

| 指标 | 数值 |
|-----|------|
| 核心粒子数量 | 3000+ |
| 帧率 | 60 FPS |
| 音频类型 | 3 种合成音效 |
| 依赖项 | 无（纯原生） |

---

## 🎁 七、适用场景

💕 **浪漫礼物** — 情人节、纪念日、生日的惊喜表白

💻 **学习参考** — Canvas 动画、粒子系统、Web Audio API 的优秀案例

🎨 **作品集展示** — 前端动画开发能力的完美体现

📚 **教学演示** — 3D 数学、面向对象设计、音频合成的实践教程

---

## 🤝 八、贡献指南

欢迎贡献代码或提出建议！您可以：

- 🐛 报告 Bug
- 💡 提出新功能建议
- 🔧 提交 Pull Request
- 📝 完善文档

---

## 📝 九、许可证

本项目采用 **MIT 许可证** 开源，您可以自由使用、修改和分发本项目的代码，但需要保留原始的版权声明。

---

<div align="center">

### 💗 Made with Love 💗

*If you like this project, please give it a ⭐ on GitHub!*

</div>
